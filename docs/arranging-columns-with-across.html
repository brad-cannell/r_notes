<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Arranging Columns with Across | R Notes</title>
  <meta name="description" content="This is the Bookdown for Brad Cannell‚Äôs R Notes." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Arranging Columns with Across | R Notes" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r_notes/" />
  
  <meta property="og:description" content="This is the Bookdown for Brad Cannell‚Äôs R Notes." />
  <meta name="github-repo" content="brad-cannell/r_notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Arranging Columns with Across | R Notes" />
  
  <meta name="twitter:description" content="This is the Bookdown for Brad Cannell‚Äôs R Notes." />
  

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2021-07-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="creating-rmd-templates.html"/>
<link rel="next" href="column-names-prepping-many-for-merge.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.15/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i>Organization</a></li>
</ul></li>
<li class="part"><span><b>I Programming</b></span></li>
<li class="chapter" data-level="1" data-path="my-package-notes.html"><a href="my-package-notes.html"><i class="fa fa-check"></i><b>1</b> Packages: Quick Start</a>
<ul>
<li class="chapter" data-level="1.1" data-path="my-package-notes.html"><a href="my-package-notes.html#overview"><i class="fa fa-check"></i><b>1.1</b> ‚≠êÔ∏èOverview</a></li>
<li class="chapter" data-level="1.2" data-path="my-package-notes.html"><a href="my-package-notes.html#useful-websites"><i class="fa fa-check"></i><b>1.2</b> üåéUseful websites</a></li>
<li class="chapter" data-level="1.3" data-path="my-package-notes.html"><a href="my-package-notes.html#step-1-create-the-package-project"><i class="fa fa-check"></i><b>1.3</b> Step 1: Create the package project</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="my-package-notes.html"><a href="my-package-notes.html#step-2-modify-the-description-file"><i class="fa fa-check"></i><b>1.3.1</b> Step 2: Modify the description file</a></li>
<li class="chapter" data-level="1.3.2" data-path="my-package-notes.html"><a href="my-package-notes.html#working-with-r-scripts"><i class="fa fa-check"></i><b>1.3.2</b> Working with R scripts</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="my-package-notes.html"><a href="my-package-notes.html#step-3-writing-help-pages"><i class="fa fa-check"></i><b>1.4</b> Step 3: Writing help pages</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="my-package-notes.html"><a href="my-package-notes.html#example-roxygen-header"><i class="fa fa-check"></i><b>1.4.1</b> Example <code>roxygen</code> header</a></li>
<li class="chapter" data-level="1.4.2" data-path="my-package-notes.html"><a href="my-package-notes.html#documenting-package"><i class="fa fa-check"></i><b>1.4.2</b> Documenting Package:</a></li>
<li class="chapter" data-level="1.4.3" data-path="my-package-notes.html"><a href="my-package-notes.html#once-package-is-complete-ish"><i class="fa fa-check"></i><b>1.4.3</b> Once package is complete (ish)</a></li>
<li class="chapter" data-level="1.4.4" data-path="my-package-notes.html"><a href="my-package-notes.html#notes-about-package-notes"><i class="fa fa-check"></i><b>1.4.4</b> Notes about package notes:</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="my-package-notes.html"><a href="my-package-notes.html#step-4-synchronize-with-github"><i class="fa fa-check"></i><b>1.5</b> Step 4: Synchronize with GitHub</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="my-package-notes.html"><a href="my-package-notes.html#example-modify-description"><i class="fa fa-check"></i><b>1.5.1</b> Example: Modify Description</a></li>
<li class="chapter" data-level="1.5.2" data-path="my-package-notes.html"><a href="my-package-notes.html#example-installation-instructions-for-readme"><i class="fa fa-check"></i><b>1.5.2</b> Example Installation instructions for README:</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="my-package-notes.html"><a href="my-package-notes.html#step-5-testing"><i class="fa fa-check"></i><b>1.6</b> Step 5: Testing</a></li>
<li class="chapter" data-level="1.7" data-path="my-package-notes.html"><a href="my-package-notes.html#vignettes"><i class="fa fa-check"></i><b>1.7</b> Vignettes</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="my-package-notes.html"><a href="my-package-notes.html#to-create-a-vignette"><i class="fa fa-check"></i><b>1.7.1</b> To create a vignette:</a></li>
<li class="chapter" data-level="1.7.2" data-path="my-package-notes.html"><a href="my-package-notes.html#vignette-notes"><i class="fa fa-check"></i><b>1.7.2</b> Vignette Notes:</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="my-package-notes.html"><a href="my-package-notes.html#adding-and-documenting-data"><i class="fa fa-check"></i><b>1.8</b> Adding and documenting data</a></li>
<li class="chapter" data-level="1.9" data-path="my-package-notes.html"><a href="my-package-notes.html#errors-warnings-notes"><i class="fa fa-check"></i><b>1.9</b> Errors, warnings, notes</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="creating-rmd-templates.html"><a href="creating-rmd-templates.html"><i class="fa fa-check"></i><b>2</b> Creating Rmd Templates</a>
<ul>
<li class="chapter" data-level="2.1" data-path="creating-rmd-templates.html"><a href="creating-rmd-templates.html#overview-1"><i class="fa fa-check"></i><b>2.1</b> ‚≠êÔ∏èOverview</a></li>
<li class="chapter" data-level="2.2" data-path="creating-rmd-templates.html"><a href="creating-rmd-templates.html#useful-websites-1"><i class="fa fa-check"></i><b>2.2</b> üåéUseful websites</a></li>
<li class="chapter" data-level="2.3" data-path="creating-rmd-templates.html"><a href="creating-rmd-templates.html#create-a-package"><i class="fa fa-check"></i><b>2.3</b> Create a package</a></li>
<li class="chapter" data-level="2.4" data-path="creating-rmd-templates.html"><a href="creating-rmd-templates.html#add-a-template-to-your-package"><i class="fa fa-check"></i><b>2.4</b> Add a template to your package</a></li>
</ul></li>
<li class="part"><span><b>II Working with External Files</b></span></li>
<li class="part"><span><b>III Data Management</b></span></li>
<li class="chapter" data-level="3" data-path="arranging-columns-with-across.html"><a href="arranging-columns-with-across.html"><i class="fa fa-check"></i><b>3</b> Arranging Columns with Across</a>
<ul>
<li class="chapter" data-level="3.1" data-path="arranging-columns-with-across.html"><a href="arranging-columns-with-across.html#solution-by-lmc"><i class="fa fa-check"></i><b>3.1</b> Solution by LMc:</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html"><i class="fa fa-check"></i><b>4</b> Column Names: Prepping Many for Merge</a>
<ul>
<li class="chapter" data-level="4.1" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#overview-2"><i class="fa fa-check"></i><b>4.1</b> ‚≠êÔ∏èOverview</a></li>
<li class="chapter" data-level="4.2" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#useful-websites-2"><i class="fa fa-check"></i><b>4.2</b> üåéUseful websites</a></li>
<li class="chapter" data-level="4.3" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#load-packages"><i class="fa fa-check"></i><b>4.3</b> üì¶Load packages</a></li>
<li class="chapter" data-level="4.4" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#simulate-data"><i class="fa fa-check"></i><b>4.4</b> üî¢Simulate data</a></li>
<li class="chapter" data-level="4.5" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#get-the-existing-column-names"><i class="fa fa-check"></i><b>4.5</b> Get the existing column names</a></li>
<li class="chapter" data-level="4.6" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#standardize-new-column-names"><i class="fa fa-check"></i><b>4.6</b> Standardize new column names</a></li>
<li class="chapter" data-level="4.7" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#turn-this-into-a-function"><i class="fa fa-check"></i><b>4.7</b> Turn this into a function</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#make-a-unit-test-for-the-function"><i class="fa fa-check"></i><b>4.7.1</b> Make a unit test for the function</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#manual-changes-to-column-names"><i class="fa fa-check"></i><b>4.8</b> Manual changes to column names</a></li>
<li class="chapter" data-level="4.9" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#have-r-write-out-the-rename-code"><i class="fa fa-check"></i><b>4.9</b> Have R write out the rename code</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#make-it-a-function"><i class="fa fa-check"></i><b>4.9.1</b> Make it a function</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#rename-the-columns"><i class="fa fa-check"></i><b>4.10</b> Rename the columns</a></li>
<li class="chapter" data-level="4.11" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#repeat-the-process-for-v2"><i class="fa fa-check"></i><b>4.11</b> Repeat the process for V2</a></li>
<li class="chapter" data-level="4.12" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#repeat-the-process-for-v3"><i class="fa fa-check"></i><b>4.12</b> Repeat the process for V3</a></li>
<li class="chapter" data-level="4.13" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#merge-all-3-visits"><i class="fa fa-check"></i><b>4.13</b> Merge all 3 visits</a></li>
<li class="chapter" data-level="4.14" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#final-data-cleaning"><i class="fa fa-check"></i><b>4.14</b> Final data cleaning</a></li>
<li class="chapter" data-level="4.15" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#the-dplyr-way"><i class="fa fa-check"></i><b>4.15</b> üü£The dplyr way</a>
<ul>
<li class="chapter" data-level="4.15.1" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#standardize-new-column-names-1"><i class="fa fa-check"></i><b>4.15.1</b> Standardize new column names</a></li>
<li class="chapter" data-level="4.15.2" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#manual-changes-to-column-names-1"><i class="fa fa-check"></i><b>4.15.2</b> Manual changes to column names 1</a></li>
<li class="chapter" data-level="4.15.3" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#merge-all-3-visits-1"><i class="fa fa-check"></i><b>4.15.3</b> Merge all 3 visits</a></li>
<li class="chapter" data-level="4.15.4" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#manual-changes-to-column-names-2"><i class="fa fa-check"></i><b>4.15.4</b> Manual changes to column names 2</a></li>
<li class="chapter" data-level="4.15.5" data-path="column-names-prepping-many-for-merge.html"><a href="column-names-prepping-many-for-merge.html#final-data-cleaning-1"><i class="fa fa-check"></i><b>4.15.5</b> Final data cleaning</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Analysis</b></span></li>
<li class="part"><span><b>V Data Visualization</b></span></li>
<li class="part"><span><b>VI Presenting Results</b></span></li>
<li class="chapter" data-level="5" data-path="book-chapters.html"><a href="book-chapters.html"><i class="fa fa-check"></i><b>5</b> Bookdown: Creating Book Chapters</a>
<ul>
<li class="chapter" data-level="5.1" data-path="book-chapters.html"><a href="book-chapters.html#chapter-overview"><i class="fa fa-check"></i><b>5.1</b> Chapter overview</a></li>
<li class="chapter" data-level="5.2" data-path="book-chapters.html"><a href="book-chapters.html#motivating-example"><i class="fa fa-check"></i><b>5.2</b> Motivating example</a></li>
<li class="chapter" data-level="5.3" data-path="book-chapters.html"><a href="book-chapters.html#body"><i class="fa fa-check"></i><b>5.3</b> Body</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="book-chapters.html"><a href="book-chapters.html#language"><i class="fa fa-check"></i><b>5.3.1</b> Language</a></li>
<li class="chapter" data-level="5.3.2" data-path="book-chapters.html"><a href="book-chapters.html#text-conventions"><i class="fa fa-check"></i><b>5.3.2</b> Text conventions</a></li>
<li class="chapter" data-level="5.3.3" data-path="book-chapters.html"><a href="book-chapters.html#special-sections"><i class="fa fa-check"></i><b>5.3.3</b> Special sections</a></li>
<li class="chapter" data-level="5.3.4" data-path="book-chapters.html"><a href="book-chapters.html#images"><i class="fa fa-check"></i><b>5.3.4</b> Images</a></li>
<li class="chapter" data-level="5.3.5" data-path="book-chapters.html"><a href="book-chapters.html#code-blocks"><i class="fa fa-check"></i><b>5.3.5</b> Code blocks</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="book-chapters.html"><a href="book-chapters.html#cross-references"><i class="fa fa-check"></i><b>5.4</b> Cross-references</a></li>
<li class="chapter" data-level="5.5" data-path="book-chapters.html"><a href="book-chapters.html#citations"><i class="fa fa-check"></i><b>5.5</b> Citations</a></li>
<li class="chapter" data-level="5.6" data-path="book-chapters.html"><a href="book-chapters.html#previewing-the-chapter"><i class="fa fa-check"></i><b>5.6</b> Previewing the chapter</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="book-chapters.html"><a href="book-chapters.html#miscelaneous"><i class="fa fa-check"></i><b>5.6.1</b> Miscelaneous</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="book-chapters.html"><a href="book-chapters.html#additional-resources-function-to-check"><i class="fa fa-check"></i><b>5.7</b> Additional resources: function to check</a></li>
<li class="chapter" data-level="5.8" data-path="book-chapters.html"><a href="book-chapters.html#key-terms-function-to-add-to-appendix"><i class="fa fa-check"></i><b>5.8</b> Key terms : function to add to appendix</a></li>
<li class="chapter" data-level="5.9" data-path="book-chapters.html"><a href="book-chapters.html#final-example-code-function-to-add-to-appendix"><i class="fa fa-check"></i><b>5.9</b> Final example code : function to add to appendix</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html"><i class="fa fa-check"></i><b>6</b> Bookdown: Quick Start</a>
<ul>
<li class="chapter" data-level="6.1" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#overview-3"><i class="fa fa-check"></i><b>6.1</b> ‚≠êÔ∏èOverview</a></li>
<li class="chapter" data-level="6.2" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#useful-websites-3"><i class="fa fa-check"></i><b>6.2</b> üåéUseful websites</a></li>
<li class="chapter" data-level="6.3" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#creating-the-bookdown-project-locally"><i class="fa fa-check"></i><b>6.3</b> Creating the bookdown project locally</a></li>
<li class="chapter" data-level="6.4" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#initiate-a-git-repository"><i class="fa fa-check"></i><b>6.4</b> Initiate a git repository</a></li>
<li class="chapter" data-level="6.5" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#create-a-github-repository-for-the-book"><i class="fa fa-check"></i><b>6.5</b> Create a github repository for the book</a></li>
<li class="chapter" data-level="6.6" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#configuring-a-publishing-source-for-the-github-pages-site"><i class="fa fa-check"></i><b>6.6</b> Configuring a publishing source for the GitHub Pages site</a></li>
<li class="chapter" data-level="6.7" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#modify-_bookdown.yml"><i class="fa fa-check"></i><b>6.7</b> Modify _bookdown.yml</a></li>
<li class="chapter" data-level="6.8" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#modify-_output.yml"><i class="fa fa-check"></i><b>6.8</b> Modify _output.yml</a></li>
<li class="chapter" data-level="6.9" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#modify-style.css"><i class="fa fa-check"></i><b>6.9</b> Modify style.css</a></li>
<li class="chapter" data-level="6.10" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#modify-index.rmd"><i class="fa fa-check"></i><b>6.10</b> Modify index.Rmd</a></li>
<li class="chapter" data-level="6.11" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#creating-bookdown-chapters"><i class="fa fa-check"></i><b>6.11</b> Creating bookdown chapters</a></li>
<li class="chapter" data-level="6.12" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#knitting-the-book"><i class="fa fa-check"></i><b>6.12</b> Knitting the book</a></li>
<li class="chapter" data-level="6.13" data-path="bookdown-quick-start.html"><a href="bookdown-quick-start.html#errors-and-warnings"><i class="fa fa-check"></i><b>6.13</b> Errors and warnings</a></li>
</ul></li>
<li class="part"><span><b>VII Shiny</b></span></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="arranging-columns-with-across" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Arranging Columns with Across</h1>
<p>I‚Äôm trying to arrange calculated columns immediately after source columns when using dplyr column-wise operations.</p>
<p><a href="https://stackoverflow.com/questions/67076974/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-col/67077122#67077122" class="uri">https://stackoverflow.com/questions/67076974/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-col/67077122#67077122</a></p>
<p><a href="https://community.rstudio.com/t/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-column-wise-operations/101726" class="uri">https://community.rstudio.com/t/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-column-wise-operations/101726</a></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="arranging-columns-with-across.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<p>Example data</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="arranging-columns-with-across.html#cb14-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb14-2"><a href="arranging-columns-with-across.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id         =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb14-3"><a href="arranging-columns-with-across.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id_row     =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb14-4"><a href="arranging-columns-with-across.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">name_first =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb14-5"><a href="arranging-columns-with-across.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">city       =</span> <span class="fu">c</span>(<span class="st">&quot;NY&quot;</span>, <span class="st">&quot;DAL&quot;</span>, <span class="st">&quot;HOU&quot;</span>),</span>
<span id="cb14-6"><a href="arranging-columns-with-across.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">x          =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb14-7"><a href="arranging-columns-with-across.html#cb14-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-8"><a href="arranging-columns-with-across.html#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="arranging-columns-with-across.html#cb14-9" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##      id id_row name_first city      x
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt;
## 1     1      1 John       NY        0
## 2     2      1 Jane       DAL       1
## 3     2      2 Jane       HOU       0</code></pre>
<p>Within ID, the values of name_first and city should be constant. The values for id_row and x need not be constant. I want to test for and inspect differing values of name_first and city within-id.</p>
<p>One convenient way to do this is with <code>mutate()</code> and <code>across()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="arranging-columns-with-across.html#cb16-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="arranging-columns-with-across.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="arranging-columns-with-across.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-4"><a href="arranging-columns-with-across.html#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb16-5"><a href="arranging-columns-with-across.html#cb16-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(name_first, city),</span>
<span id="cb16-6"><a href="arranging-columns-with-across.html#cb16-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb16-7"><a href="arranging-columns-with-across.html#cb16-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb16-8"><a href="arranging-columns-with-across.html#cb16-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-9"><a href="arranging-columns-with-across.html#cb16-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##      id id_row name_first city      x name_first_all_match city_all_match
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;                &lt;lgl&gt;         
## 1     1      1 John       NY        0 TRUE                 TRUE          
## 2     2      1 Jane       DAL       1 TRUE                 FALSE         
## 3     2      2 Jane       HOU       0 TRUE                 FALSE</code></pre>
<p>The issue is that the ‚Äúall_match‚Äù (calculated) columns are added to the far right of the data frame rather than immediately after their source column. This makes it difficult to visually inspect differing values for the columns of interest.</p>
<p>Of course, in this small data frame, we could easily rearrange the columns using <code>select()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="arranging-columns-with-across.html#cb18-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="arranging-columns-with-across.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="arranging-columns-with-across.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-4"><a href="arranging-columns-with-across.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb18-5"><a href="arranging-columns-with-across.html#cb18-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(name_first, city),</span>
<span id="cb18-6"><a href="arranging-columns-with-across.html#cb18-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb18-7"><a href="arranging-columns-with-across.html#cb18-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb18-8"><a href="arranging-columns-with-across.html#cb18-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-9"><a href="arranging-columns-with-across.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb18-10"><a href="arranging-columns-with-across.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, id_row, <span class="fu">starts_with</span>(<span class="st">&quot;name_first&quot;</span>), <span class="fu">starts_with</span>(<span class="st">&quot;city&quot;</span>), x)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##      id id_row name_first name_first_all_match city  city_all_match     x
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;lgl&gt;                &lt;chr&gt; &lt;lgl&gt;          &lt;dbl&gt;
## 1     1      1 John       TRUE                 NY    TRUE               0
## 2     2      1 Jane       TRUE                 DAL   FALSE              1
## 3     2      2 Jane       TRUE                 HOU   FALSE              0</code></pre>
<p>The issue with that approach is that it quickly becomes pretty cumbersome with more columns. A more tractable approach would be to sort the names alphabetically‚Ä¶</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="arranging-columns-with-across.html#cb20-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="arranging-columns-with-across.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="arranging-columns-with-across.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-4"><a href="arranging-columns-with-across.html#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb20-5"><a href="arranging-columns-with-across.html#cb20-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(name_first, city),</span>
<span id="cb20-6"><a href="arranging-columns-with-across.html#cb20-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb20-7"><a href="arranging-columns-with-across.html#cb20-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb20-8"><a href="arranging-columns-with-across.html#cb20-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-9"><a href="arranging-columns-with-across.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-10"><a href="arranging-columns-with-across.html#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">sort</span>(<span class="fu">names</span>(.)))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##   city  city_all_match    id id_row name_first name_first_all_match     x
##   &lt;chr&gt; &lt;lgl&gt;          &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;lgl&gt;                &lt;dbl&gt;
## 1 NY    TRUE               1      1 John       TRUE                     0
## 2 DAL   FALSE              2      1 Jane       TRUE                     1
## 3 HOU   FALSE              2      2 Jane       TRUE                     0</code></pre>
<p>‚Ä¶but in my situation I need to preserve the original column order. I‚Äôd also prefer to stick with Tidyverse solutions if possible.</p>
<p>Any ideas are appreciated!</p>
<div id="solution-by-lmc" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Solution by LMc:</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="arranging-columns-with-across.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use select because it allows for more complex column selection when working </span></span>
<span id="cb22-2"><a href="arranging-columns-with-across.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># with more complex data frames.</span></span>
<span id="cb22-3"><a href="arranging-columns-with-across.html#cb22-3" aria-hidden="true" tabindex="-1"></a>inspect_cols <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(name_first, city) <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="arranging-columns-with-across.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set column order ahead of time. This assumes that you know the names of each </span></span>
<span id="cb23-2"><a href="arranging-columns-with-across.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of the columns you want to inspect</span></span>
<span id="cb23-3"><a href="arranging-columns-with-across.html#cb23-3" aria-hidden="true" tabindex="-1"></a>col_order <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb23-4"><a href="arranging-columns-with-across.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df), </span>
<span id="cb23-5"><a href="arranging-columns-with-across.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {</span>
<span id="cb23-6"><a href="arranging-columns-with-across.html#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x <span class="sc">%in%</span> inspect_cols) {</span>
<span id="cb23-7"><a href="arranging-columns-with-across.html#cb23-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(x, <span class="fu">paste0</span>(x, <span class="st">&quot;_all_match&quot;</span>))</span>
<span id="cb23-8"><a href="arranging-columns-with-across.html#cb23-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb23-9"><a href="arranging-columns-with-across.html#cb23-9" aria-hidden="true" tabindex="-1"></a>      x</span>
<span id="cb23-10"><a href="arranging-columns-with-across.html#cb23-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-11"><a href="arranging-columns-with-across.html#cb23-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-12"><a href="arranging-columns-with-across.html#cb23-12" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-13"><a href="arranging-columns-with-across.html#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="arranging-columns-with-across.html#cb24-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="arranging-columns-with-across.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="arranging-columns-with-across.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-4"><a href="arranging-columns-with-across.html#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb24-5"><a href="arranging-columns-with-across.html#cb24-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">all_of</span>(inspect_cols),</span>
<span id="cb24-6"><a href="arranging-columns-with-across.html#cb24-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb24-7"><a href="arranging-columns-with-across.html#cb24-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb24-8"><a href="arranging-columns-with-across.html#cb24-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-9"><a href="arranging-columns-with-across.html#cb24-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb24-10"><a href="arranging-columns-with-across.html#cb24-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">all_of</span>(col_order))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##      id id_row name_first name_first_all_match city  city_all_match     x
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;lgl&gt;                &lt;chr&gt; &lt;lgl&gt;          &lt;dbl&gt;
## 1     1      1 John       TRUE                 NY    TRUE               0
## 2     2      1 Jane       TRUE                 DAL   FALSE              1
## 3     2      2 Jane       TRUE                 HOU   FALSE              0</code></pre>
<!--
Clean up and add session info
-->
<pre><code>## R version 4.0.5 (2021-03-31)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur 10.16
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] dplyr_1.0.6
## 
## loaded via a namespace (and not attached):
##  [1] rstudioapi_0.13  knitr_1.30       magrittr_2.0.1   tidyselect_1.1.0
##  [5] R6_2.4.1         rlang_0.4.10     fansi_0.4.1      stringr_1.4.0   
##  [9] tools_4.0.5      xfun_0.19        png_0.1-7        utf8_1.1.4      
## [13] cli_2.4.0        DBI_1.1.0        htmltools_0.5.0  ellipsis_0.3.1  
## [17] assertthat_0.2.1 yaml_2.2.1       digest_0.6.25    tibble_3.1.1    
## [21] lifecycle_1.0.0  crayon_1.4.1     bookdown_0.18    purrr_0.3.4     
## [25] vctrs_0.3.7      glue_1.4.2       evaluate_0.14    rmarkdown_2.6   
## [29] stringi_1.5.3    compiler_4.0.5   pillar_1.6.0     generics_0.1.0  
## [33] pkgconfig_2.0.3</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="creating-rmd-templates.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="column-names-prepping-many-for-merge.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
