<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Arranging Columns with Across | R Notes</title>
  <meta name="description" content="This is the Bookdown for Brad Cannell’s R Notes." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Arranging Columns with Across | R Notes" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r_notes/" />
  
  <meta property="og:description" content="This is the Bookdown for Brad Cannell’s R Notes." />
  <meta name="github-repo" content="brad-cannell/r_notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Arranging Columns with Across | R Notes" />
  
  <meta name="twitter:description" content="This is the Bookdown for Brad Cannell’s R Notes." />
  

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2021-06-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="bookdown.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Programming</b></span></li>
<li class="part"><span><b>II Data Management</b></span></li>
<li class="chapter" data-level="1" data-path="arranging-columns-with-across.html"><a href="arranging-columns-with-across.html"><i class="fa fa-check"></i><b>1</b> Arranging Columns with Across</a>
<ul>
<li class="chapter" data-level="1.1" data-path="arranging-columns-with-across.html"><a href="arranging-columns-with-across.html#solution-by-lmc"><i class="fa fa-check"></i><b>1.1</b> Solution by LMc:</a></li>
</ul></li>
<li class="part"><span><b>III Analysis</b></span></li>
<li class="part"><span><b>IV Presenting Results</b></span></li>
<li class="chapter" data-level="2" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>2</b> Making a Bookdown Book Project</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bookdown.html"><a href="bookdown.html#creating-the-bookdown-project-locally"><i class="fa fa-check"></i><b>2.1</b> Creating the bookdown project locally</a></li>
<li class="chapter" data-level="2.2" data-path="bookdown.html"><a href="bookdown.html#initiate-a-git-repository"><i class="fa fa-check"></i><b>2.2</b> Initiate a git repository</a></li>
<li class="chapter" data-level="2.3" data-path="bookdown.html"><a href="bookdown.html#create-a-github-repository-for-the-book"><i class="fa fa-check"></i><b>2.3</b> Create a github repository for the book</a></li>
<li class="chapter" data-level="2.4" data-path="bookdown.html"><a href="bookdown.html#configuring-a-publishing-source-for-the-github-pages-site"><i class="fa fa-check"></i><b>2.4</b> Configuring a publishing source for the GitHub Pages site</a></li>
<li class="chapter" data-level="2.5" data-path="bookdown.html"><a href="bookdown.html#modify-_bookdown.yml"><i class="fa fa-check"></i><b>2.5</b> Modify _bookdown.yml</a></li>
<li class="chapter" data-level="2.6" data-path="bookdown.html"><a href="bookdown.html#modify-_output.yml"><i class="fa fa-check"></i><b>2.6</b> Modify _output.yml</a></li>
<li class="chapter" data-level="2.7" data-path="bookdown.html"><a href="bookdown.html#modify-style.css"><i class="fa fa-check"></i><b>2.7</b> Modify style.css</a></li>
<li class="chapter" data-level="2.8" data-path="bookdown.html"><a href="bookdown.html#modify-index.rmd"><i class="fa fa-check"></i><b>2.8</b> Modify index.Rmd</a></li>
<li class="chapter" data-level="2.9" data-path="bookdown.html"><a href="bookdown.html#creating-bookdown-chapters"><i class="fa fa-check"></i><b>2.9</b> Creating bookdown chapters</a></li>
<li class="chapter" data-level="2.10" data-path="bookdown.html"><a href="bookdown.html#knitting-the-book"><i class="fa fa-check"></i><b>2.10</b> Knitting the book</a></li>
<li class="chapter" data-level="2.11" data-path="bookdown.html"><a href="bookdown.html#errors-and-warnings"><i class="fa fa-check"></i><b>2.11</b> Errors and warnings</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="bookdown-template.html"><a href="bookdown-template.html"><i class="fa fa-check"></i><b>3</b> Bookdown Template Chapter</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bookdown-template.html"><a href="bookdown-template.html#chapter-overview"><i class="fa fa-check"></i><b>3.1</b> Chapter overview</a></li>
<li class="chapter" data-level="3.2" data-path="bookdown-template.html"><a href="bookdown-template.html#motivating-example"><i class="fa fa-check"></i><b>3.2</b> Motivating example</a></li>
<li class="chapter" data-level="3.3" data-path="bookdown-template.html"><a href="bookdown-template.html#body"><i class="fa fa-check"></i><b>3.3</b> Body</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="bookdown-template.html"><a href="bookdown-template.html#language"><i class="fa fa-check"></i><b>3.3.1</b> Language</a></li>
<li class="chapter" data-level="3.3.2" data-path="bookdown-template.html"><a href="bookdown-template.html#text-conventions"><i class="fa fa-check"></i><b>3.3.2</b> Text conventions</a></li>
<li class="chapter" data-level="3.3.3" data-path="bookdown-template.html"><a href="bookdown-template.html#special-sections"><i class="fa fa-check"></i><b>3.3.3</b> Special sections</a></li>
<li class="chapter" data-level="3.3.4" data-path="bookdown-template.html"><a href="bookdown-template.html#images"><i class="fa fa-check"></i><b>3.3.4</b> Images</a></li>
<li class="chapter" data-level="3.3.5" data-path="bookdown-template.html"><a href="bookdown-template.html#code-blocks"><i class="fa fa-check"></i><b>3.3.5</b> Code blocks</a></li>
<li class="chapter" data-level="3.3.6" data-path="bookdown-template.html"><a href="bookdown-template.html#cross-references"><i class="fa fa-check"></i><b>3.3.6</b> Cross-references</a></li>
<li class="chapter" data-level="3.3.7" data-path="bookdown-template.html"><a href="bookdown-template.html#previewing-the-chapter"><i class="fa fa-check"></i><b>3.3.7</b> Previewing the chapter</a></li>
<li class="chapter" data-level="3.3.8" data-path="bookdown-template.html"><a href="bookdown-template.html#miscelaneous"><i class="fa fa-check"></i><b>3.3.8</b> Miscelaneous</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="bookdown-template.html"><a href="bookdown-template.html#additional-resources-function-to-check"><i class="fa fa-check"></i><b>3.4</b> Additional resources: function to check</a></li>
<li class="chapter" data-level="3.5" data-path="bookdown-template.html"><a href="bookdown-template.html#key-terms-function-to-add-to-appendix"><i class="fa fa-check"></i><b>3.5</b> Key terms : function to add to appendix</a></li>
<li class="chapter" data-level="3.6" data-path="bookdown-template.html"><a href="bookdown-template.html#final-example-code-function-to-add-to-appendix"><i class="fa fa-check"></i><b>3.6</b> Final example code : function to add to appendix</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="arranging-columns-with-across" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Arranging Columns with Across</h1>
<p>I’m trying to arrange calculated columns immediately after source columns when using dplyr column-wise operations.</p>
<p><a href="https://stackoverflow.com/questions/67076974/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-col/67077122#67077122" class="uri">https://stackoverflow.com/questions/67076974/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-col/67077122#67077122</a></p>
<p><a href="https://community.rstudio.com/t/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-column-wise-operations/101726" class="uri">https://community.rstudio.com/t/arrange-calculated-columns-immediately-after-source-columns-when-using-dplyr-column-wise-operations/101726</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="arranging-columns-with-across.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<p>Example data</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="arranging-columns-with-across.html#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-2"><a href="arranging-columns-with-across.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id         =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb5-3"><a href="arranging-columns-with-across.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id_row     =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb5-4"><a href="arranging-columns-with-across.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">name_first =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb5-5"><a href="arranging-columns-with-across.html#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">city       =</span> <span class="fu">c</span>(<span class="st">&quot;NY&quot;</span>, <span class="st">&quot;DAL&quot;</span>, <span class="st">&quot;HOU&quot;</span>),</span>
<span id="cb5-6"><a href="arranging-columns-with-across.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">x          =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb5-7"><a href="arranging-columns-with-across.html#cb5-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-8"><a href="arranging-columns-with-across.html#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="arranging-columns-with-across.html#cb5-9" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##      id id_row name_first city      x
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt;
## 1     1      1 John       NY        0
## 2     2      1 Jane       DAL       1
## 3     2      2 Jane       HOU       0</code></pre>
<p>Within ID, the values of name_first and city should be constant. The values for id_row and x need not be constant. I want to test for and inspect differing values of name_first and city within-id.</p>
<p>One convenient way to do this is with <code>mutate()</code> and <code>across()</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="arranging-columns-with-across.html#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="arranging-columns-with-across.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="arranging-columns-with-across.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-4"><a href="arranging-columns-with-across.html#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb7-5"><a href="arranging-columns-with-across.html#cb7-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(name_first, city),</span>
<span id="cb7-6"><a href="arranging-columns-with-across.html#cb7-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb7-7"><a href="arranging-columns-with-across.html#cb7-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb7-8"><a href="arranging-columns-with-across.html#cb7-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-9"><a href="arranging-columns-with-across.html#cb7-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##      id id_row name_first city      x name_first_all_match city_all_match
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;                &lt;lgl&gt;         
## 1     1      1 John       NY        0 TRUE                 TRUE          
## 2     2      1 Jane       DAL       1 TRUE                 FALSE         
## 3     2      2 Jane       HOU       0 TRUE                 FALSE</code></pre>
<p>The issue is that the “all_match” (calculated) columns are added to the far right of the data frame rather than immediately after their source column. This makes it difficult to visually inspect differing values for the columns of interest.</p>
<p>Of course, in this small data frame, we could easily rearrange the columns using <code>select()</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="arranging-columns-with-across.html#cb9-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="arranging-columns-with-across.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="arranging-columns-with-across.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-4"><a href="arranging-columns-with-across.html#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb9-5"><a href="arranging-columns-with-across.html#cb9-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(name_first, city),</span>
<span id="cb9-6"><a href="arranging-columns-with-across.html#cb9-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb9-7"><a href="arranging-columns-with-across.html#cb9-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb9-8"><a href="arranging-columns-with-across.html#cb9-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-9"><a href="arranging-columns-with-across.html#cb9-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb9-10"><a href="arranging-columns-with-across.html#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, id_row, <span class="fu">starts_with</span>(<span class="st">&quot;name_first&quot;</span>), <span class="fu">starts_with</span>(<span class="st">&quot;city&quot;</span>), x)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##      id id_row name_first name_first_all_match city  city_all_match     x
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;lgl&gt;                &lt;chr&gt; &lt;lgl&gt;          &lt;dbl&gt;
## 1     1      1 John       TRUE                 NY    TRUE               0
## 2     2      1 Jane       TRUE                 DAL   FALSE              1
## 3     2      2 Jane       TRUE                 HOU   FALSE              0</code></pre>
<p>The issue with that approach is that it quickly becomes pretty cumbersome with more columns. A more tractable approach would be to sort the names alphabetically…</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="arranging-columns-with-across.html#cb11-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="arranging-columns-with-across.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="arranging-columns-with-across.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-4"><a href="arranging-columns-with-across.html#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb11-5"><a href="arranging-columns-with-across.html#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(name_first, city),</span>
<span id="cb11-6"><a href="arranging-columns-with-across.html#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb11-7"><a href="arranging-columns-with-across.html#cb11-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb11-8"><a href="arranging-columns-with-across.html#cb11-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-9"><a href="arranging-columns-with-across.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="arranging-columns-with-across.html#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">sort</span>(<span class="fu">names</span>(.)))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##   city  city_all_match    id id_row name_first name_first_all_match     x
##   &lt;chr&gt; &lt;lgl&gt;          &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;lgl&gt;                &lt;dbl&gt;
## 1 NY    TRUE               1      1 John       TRUE                     0
## 2 DAL   FALSE              2      1 Jane       TRUE                     1
## 3 HOU   FALSE              2      2 Jane       TRUE                     0</code></pre>
<p>…but in my situation I need to preserve the original column order. I’d also prefer to stick with Tidyverse solutions if possible.</p>
<p>Any ideas are appreciated!</p>
<div id="solution-by-lmc" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Solution by LMc:</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="arranging-columns-with-across.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use select because it allows for more complex column selection when working </span></span>
<span id="cb13-2"><a href="arranging-columns-with-across.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># with more complex data frames.</span></span>
<span id="cb13-3"><a href="arranging-columns-with-across.html#cb13-3" aria-hidden="true" tabindex="-1"></a>inspect_cols <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(name_first, city) <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="arranging-columns-with-across.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set column order ahead of time. This assumes that you know the names of each </span></span>
<span id="cb14-2"><a href="arranging-columns-with-across.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of the columns you want to inspect</span></span>
<span id="cb14-3"><a href="arranging-columns-with-across.html#cb14-3" aria-hidden="true" tabindex="-1"></a>col_order <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb14-4"><a href="arranging-columns-with-across.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df), </span>
<span id="cb14-5"><a href="arranging-columns-with-across.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {</span>
<span id="cb14-6"><a href="arranging-columns-with-across.html#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x <span class="sc">%in%</span> inspect_cols) {</span>
<span id="cb14-7"><a href="arranging-columns-with-across.html#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(x, <span class="fu">paste0</span>(x, <span class="st">&quot;_all_match&quot;</span>))</span>
<span id="cb14-8"><a href="arranging-columns-with-across.html#cb14-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb14-9"><a href="arranging-columns-with-across.html#cb14-9" aria-hidden="true" tabindex="-1"></a>      x</span>
<span id="cb14-10"><a href="arranging-columns-with-across.html#cb14-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-11"><a href="arranging-columns-with-across.html#cb14-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-12"><a href="arranging-columns-with-across.html#cb14-12" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-13"><a href="arranging-columns-with-across.html#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="arranging-columns-with-across.html#cb15-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="arranging-columns-with-across.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="arranging-columns-with-across.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-4"><a href="arranging-columns-with-across.html#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb15-5"><a href="arranging-columns-with-across.html#cb15-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">all_of</span>(inspect_cols),</span>
<span id="cb15-6"><a href="arranging-columns-with-across.html#cb15-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">length</span>(<span class="fu">unique</span>(.x)) <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb15-7"><a href="arranging-columns-with-across.html#cb15-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_all_match&quot;</span></span>
<span id="cb15-8"><a href="arranging-columns-with-across.html#cb15-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-9"><a href="arranging-columns-with-across.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-10"><a href="arranging-columns-with-across.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">all_of</span>(col_order))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
## # Groups:   id [2]
##      id id_row name_first name_first_all_match city  city_all_match     x
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;lgl&gt;                &lt;chr&gt; &lt;lgl&gt;          &lt;dbl&gt;
## 1     1      1 John       TRUE                 NY    TRUE               0
## 2     2      1 Jane       TRUE                 DAL   FALSE              1
## 3     2      2 Jane       TRUE                 HOU   FALSE              0</code></pre>

</div>
</div>




</div>




</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bookdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
